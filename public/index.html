<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LoRA Manager Local</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        /* ç®€å•çš„å¸ƒå±€è¡¥å…… */
        .container {  margin: 0 auto; }
        .card { background: #252525; padding: 20px; border-radius: 8px; margin-bottom: 20px; }
        h2 { margin-top: 0; color: #fff; border-bottom: 1px solid #444; padding-bottom: 10px; }
        
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; color: #ccc; }
        input[type="text"] { width: 100%; padding: 8px; background: #111; border: 1px solid #444; color: #fff; border-radius: 4px; }
        textarea { width: 100%; padding: 8px; background: #111; border: 1px solid #444; color: #fff; border-radius: 4px; resize: vertical; }
        
        .primary-btn {
            background: #4caf50; color: white; border: none; padding: 10px 20px;
            border-radius: 4px; cursor: pointer; font-size: 16px; width: 100%;
        }
        .primary-btn:hover { background: #45a049; }
        .file-box { border: 2px dashed #444; padding: 20px; text-align: center; color: #888; cursor: pointer; margin-bottom: 10px; }
        .file-box:hover { border-color: #666; background: #2a2a2a; }
    </style>
</head>
<body>

<div class="container">
    <div class="card">
        <h2>å¯¼å…¥ LoRA</h2>
        
        <div class="form-group upload-grid">
            <div id="drop-lora" class="drop-zone">
                <div class="drop-content">
                    <span style="font-size: 24px;">ğŸ“¦</span>
                    <p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;æ‹–å…¥ LoRA æ–‡ä»¶<br><span style="font-size:12px;color:#666;">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;(.safetensors .ckpt .pt)</span></p>
                    <div id="lora-file-name" class="file-name-tag"></div>
                </div>
                <input type="file" id="file-lora" style="display:none" accept=".safetensors,.pt,.ckpt">
            </div>

            <div id="drop-preview" class="drop-zone">
                <div class="drop-content">
                    <span style="font-size: 24px;">ğŸ–¼ï¸</span>
                    <p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;æ‹–å…¥å‚è€ƒå›¾<br><span style="font-size:12px;color:#666;">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;(æ”¯æŒå¤šé€‰)</span></p>
                </div>
                <div id="preview-thumbs" class="preview-thumbs-container"></div>
                <input type="file" id="file-preview" multiple accept="image/*" style="display:none">
            </div>
        </div>

        <div id="tag-editor-container"></div>

        <div class="form-group" style="margin-top: 20px;">
            <label>LoRA åç§°</label>
            <input type="text" id="input-lora-name" placeholder="è‡ªåŠ¨å¡«å……æˆ–æ‰‹åŠ¨è¾“å…¥">
        </div>

        <div class="form-group grid-2-col">
            <div>
                <label>ğŸ  Cç«™ / æ¥æºåœ°å€</label>
                <input type="text" id="input-civitai" placeholder="https://civitai.com/models/...">
            </div>
            <div>
                <label>ğŸª„ æ¿€æ´»è¯ (Trigger Words)</label>
                <input type="text" id="input-triggers" placeholder="girl, white hair, ... (é€—å·åˆ†éš”)">
            </div>
        </div>
        <div class="form-group">
            <label>ğŸ“ å¤‡æ³¨</label>
            <textarea id="input-remark" rows="2" placeholder="è®°å½•ç‰ˆæœ¬ä¿¡æ¯ã€æ¨èæƒé‡ç­‰..."></textarea>
        </div>

        <button class="primary-btn" onclick="doImport()">å¼€å§‹å¯¼å…¥</button>
    </div>
    <div style="display:flex; justify-content:space-between; align-items:center; margin-top: 40px; border-bottom: 1px solid #444; margin-bottom: 20px;">
        <h2 style="border:none; margin:0;">æˆ‘çš„ LoRA åº“</h2>
        <button class="secondary-btn" onclick="window.app.toggleMultiSelect()">âœ… è¿›å…¥å¤šé€‰æ¨¡å¼</button>
    </div>
    <div id="library-container"></div>
</div>
<div id="action-bar" class="action-bar">
    <span>å·²é€‰ä¸­ <b id="selected-count">0</b> ä¸ª LoRA</span>
    <div class="actions">
        <button onclick="window.app.exportPrompt()">ğŸ“‹ å¯¼å‡ºæç¤ºè¯</button>
        <button onclick="window.app.batchDelete()" style="background:#d32f2f;">ğŸ—‘ï¸ æ‰¹é‡åˆ é™¤</button>
        <button onclick="window.app.toggleMultiSelect()">âŒ é€€å‡ºå¤šé€‰</button>
    </div>
</div>
<div id="edit-modal" class="modal">
    <div class="modal-content">
        <h3>ç¼–è¾‘ LoRA å±æ€§</h3>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px;">
            <div>
                <label style="font-size:12px; color:#888;">Cç«™åœ°å€</label>
                <input type="text" id="edit-civitai" class="filter-input" style="width:100%">
            </div>
            <div>
                <label style="font-size:12px; color:#888;">æ¿€æ´»è¯</label>
                <input type="text" id="edit-triggers" class="filter-input" style="width:100%">
            </div>
        </div>
        <div style="margin-bottom: 15px;">
            <label style="font-size:12px; color:#888;">å¤‡æ³¨</label>
            <textarea id="edit-remark" class="filter-input" style="width:100%; height: 60px;"></textarea>
        </div>

        <hr style="border-color:#444; margin-bottom:15px;">

        <div id="edit-tag-container"></div>
        
        <div class="modal-actions">
            <button class="secondary-btn" onclick="window.app.closeModal()">å–æ¶ˆ</button>
            <button class="primary-btn" onclick="window.app.saveEdit()">ğŸ’¾ ä¿å­˜å¹¶ç§»åŠ¨æ–‡ä»¶</button>
        </div>
    </div>
</div>
<script type="module" src="js/app.js"></script>

</body>
</html>